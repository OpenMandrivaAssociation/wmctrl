From a07a27cba91b10c55affc687d52b49484c06996b Mon Sep 17 00:00:00 2001
From: Franck Bui-Huu <fbuihuu@gmail.com>
Date: Thu, 11 Oct 2012 08:55:54 +0000
Subject: [PATCH 1/3] Fix desktop id parsing

The previous code didn't detect any invalid desktop id.

Signed-off-by: Franck Bui-Huu <fbuihuu@gmail.com>
---
 main.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/main.c b/main.c
index 9dc1600..f08dddd 100644
--- a/main.c
+++ b/main.c
@@ -616,10 +616,11 @@ static int change_number_of_desktops (Display *disp) {/*{{{*/
 }/*}}}*/
 
 static int switch_desktop (Display *disp) {/*{{{*/
-    int target = -1;
-    
-    target = atoi(options.param); 
-    if (target == -1) {
+    char *s;
+    int target = 0;
+
+    target = strtol(options.param, &s, 10);
+    if (*s) {
         fputs("Invalid desktop ID.\n", stderr);
         return EXIT_FAILURE;
     }
-- 
1.7.9.2

